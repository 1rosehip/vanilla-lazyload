define((function(){"use strict";function n(){return(n=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n}).apply(this,arguments)}var t="undefined"!=typeof window,e=t&&!("onscroll"in window)||"undefined"!=typeof navigator&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),i=t&&"IntersectionObserver"in window,o=t&&"classList"in document.createElement("p"),r=t&&window.devicePixelRatio>1,a={elements_selector:"img",container:e||t?document:null,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",data_bg_hidpi:"bg-hidpi",data_bg_multi:"bg-multi",data_bg_multi_hidpi:"bg-multi-hidpi",data_poster:"poster",class_applied:"applied",class_loading:"loading",class_loaded:"loaded",class_error:"error",unobserve_completed:!0,unobserve_entered:!1,cancel_on_exit:!1,callback_enter:null,callback_exit:null,callback_applied:null,callback_loading:null,callback_loaded:null,callback_error:null,callback_finish:null,callback_cancel:null,use_native:!1},c=function(t){return n({},a,t)},l=function(n,t){var e,i=new n(t);try{e=new CustomEvent("LazyLoad::Initialized",{detail:{instance:i}})}catch(n){(e=document.createEvent("CustomEvent")).initCustomEvent("LazyLoad::Initialized",!1,!1,{instance:i})}window.dispatchEvent(e)},s=function(n,t){return n.getAttribute("data-"+t)},u=function(n){return s(n,"ll-status")},d=function(n,t){return function(n,t,e){var i="data-"+t;null!==e?n.setAttribute(i,e):n.removeAttribute(i)}(n,"ll-status",t)},f=function(n){return d(n,null)},_=function(n){return null===u(n)},g=["loading","applied","loaded","error"],v=function(n,t,e,i){n&&(void 0===i?void 0===e?n(t):n(t,e):n(t,e,i))},b=function(n,t){o?n.classList.add(t):n.className+=(n.className?" ":"")+t},p=function(n,t){o?n.classList.remove(t):n.className=n.className.replace(new RegExp("(^|\\s+)"+t+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,"")},h=function(n){return n.llTempImage},m=function(n,t){if(t){var e=t._observer;e&&e.unobserve(n)}},E=function(n,t){n&&(n.loadingCount+=t)},I=function(n,t){n&&(n.toLoadCount=t)},A=function(n){for(var t,e=[],i=0;t=n.children[i];i+=1)"SOURCE"===t.tagName&&e.push(t);return e},L=function(n,t,e){e&&n.setAttribute(t,e)},w=function(n,t){n.removeAttribute(t)},k=function(n){return!!n.llOriginalAttrs},y=function(n){if(!k(n)){var t={};t.src=n.getAttribute("src"),t.srcset=n.getAttribute("srcset"),t.sizes=n.getAttribute("sizes"),n.llOriginalAttrs=t}},O=function(n){if(k(n)){var t=n.llOriginalAttrs;L(n,"src",t.src),L(n,"srcset",t.srcset),L(n,"sizes",t.sizes)}},z=function(n,t){L(n,"sizes",s(n,t.data_sizes)),L(n,"srcset",s(n,t.data_srcset)),L(n,"src",s(n,t.data_src))},C=function(n){w(n,"src"),w(n,"srcset"),w(n,"sizes")},N=function(n,t){var e=n.parentNode;e&&"PICTURE"===e.tagName&&A(e).forEach(t)},x={IMG:function(n,t){N(n,(function(n){y(n),z(n,t)})),y(n),z(n,t)},IFRAME:function(n,t){L(n,"src",s(n,t.data_src))},VIDEO:function(n,t){A(n).forEach((function(n){L(n,"src",s(n,t.data_src))})),L(n,"poster",s(n,t.data_poster)),L(n,"src",s(n,t.data_src)),n.load()}},M=function(n,t,e){var i=x[n.tagName];i&&(i(n,t),E(e,1),b(n,t.class_loading),d(n,"loading"),v(t.callback_loading,n,e))},R=["IMG","IFRAME","VIDEO"],T=function(n,t){!t||function(n){return n.loadingCount>0}(t)||function(n){return n.toLoadCount>0}(t)||v(n.callback_finish,t)},G=function(n,t,e){n.addEventListener(t,e),n.llEvLisnrs[t]=e},D=function(n,t,e){n.removeEventListener(t,e)},F=function(n){return!!n.llEvLisnrs},P=function(n){if(F(n)){var t=n.llEvLisnrs;for(var e in t){var i=t[e];D(n,e,i)}delete n.llEvLisnrs}},S=function(n,t,e){!function(n){delete n.llTempImage}(n),E(e,-1),function(n){n&&(n.toLoadCount-=1)}(e),p(n,t.class_loading),t.unobserve_completed&&m(n,e)},V=function(n,t,e){var i=h(n)||n;if(!F(i)){!function(n,t,e){F(n)||(n.llEvLisnrs={}),G(n,"load",t),G(n,"error",e),"VIDEO"===n.tagName&&G(n,"loadeddata",t)}(i,(function(o){!function(n,t,e,i){S(t,e,i),b(t,e.class_loaded),d(t,"loaded"),v(e.callback_loaded,t,i),T(e,i)}(0,n,t,e),P(i)}),(function(o){!function(n,t,e,i){S(t,e,i),b(t,e.class_error),d(t,"error"),v(e.callback_error,t,i),T(e,i)}(0,n,t,e),P(i)}))}},j=function(n,t,e){!function(n){n.llTempImage=document.createElement("img")}(n),V(n,t,e),function(n,t,e){var i=s(n,t.data_bg),o=s(n,t.data_bg_hidpi),a=r&&o?o:i;a&&(n.style.backgroundImage='url("'.concat(a,'")'),h(n).setAttribute("src",a),E(e,1),b(n,t.class_loading),d(n,"loading"),v(t.callback_loading,n,e))}(n,t,e),function(n,t,e){var i=s(n,t.data_bg_multi),o=s(n,t.data_bg_multi_hidpi),a=r&&o?o:i;a&&(n.style.backgroundImage=a,b(n,t.class_applied),d(n,"applied"),v(t.callback_applied,n,e),t.unobserve_completed&&m(n,t))}(n,t,e)},U=function(n,t,e){!function(n){return R.indexOf(n.tagName)>-1}(n)?j(n,t,e):function(n,t,e){V(n,t,e),M(n,t,e)}(n,t,e),T(t,e)},$=function(n,t,e,i){"IMG"===n.tagName&&(P(n),function(n){N(n,(function(n){C(n)})),C(n)}(n),function(n){N(n,(function(n){O(n)})),O(n)}(n),p(n,e.class_loading),E(i,-1),v(e.callback_cancel,n,t,i),setTimeout((function(){f(n)}),0))},q=function(n,t,e,i){v(e.callback_enter,n,t,i),function(n){return g.indexOf(u(n))>-1}(n)||(e.unobserve_entered&&m(n,i),U(n,e,i))},H=function(n,t,e,i){_(n)||(e.cancel_on_exit&&function(n){return"loading"===u(n)}(n)&&$(n,t,e,i),v(e.callback_exit,n,t,i))},B=["IMG","IFRAME"],J=function(n){return n.use_native&&"loading"in HTMLImageElement.prototype},K=function(n,t,e){n.forEach((function(n){-1!==B.indexOf(n.tagName)&&(n.setAttribute("loading","lazy"),function(n,t,e){V(n,t,e),M(n,t,e),d(n,"native"),T(t,e)}(n,t,e))})),I(e,0)},Q=function(n,t){i&&!J(n)&&(t._observer=new IntersectionObserver((function(e){!function(n,t,e){n.forEach((function(n){return function(n){return n.isIntersecting||n.intersectionRatio>0}(n)?q(n.target,n,t,e):H(n.target,n,t,e)}))}(e,n,t)}),function(n){return{root:n.container===document?null:n.container,rootMargin:n.thresholds||n.threshold+"px"}}(n)))},W=function(n){return Array.prototype.slice.call(n)},X=function(n){return n.container.querySelectorAll(n.elements_selector)},Y=function(n){return function(n){return"error"===u(n)}(n)},Z=function(n,t){return function(n){return W(n).filter(_)}(n||X(t))},nn=function(n,t){var e;(e=X(n),W(e).filter(Y)).forEach((function(t){p(t,n.class_error),f(t)})),t.update()},tn=function(n,e){var i=c(n);this._settings=i,this.loadingCount=0,Q(i,this),function(n,e){t&&window.addEventListener("online",(function(){nn(n,e)}))}(i,this),this.update(e)};return tn.prototype={update:function(n){var t,o,r=this._settings,a=Z(n,r);(I(this,a.length),!e&&i)?J(r)?K(a,r,this):(t=this._observer,o=a,function(n){n.disconnect()}(t),function(n,t){t.forEach((function(t){n.observe(t)}))}(t,o)):this.loadAll(a)},destroy:function(){this._observer&&this._observer.disconnect(),delete this._observer,delete this._settings,delete this.loadingCount,delete this.toLoadCount},loadAll:function(n){var t=this,e=this._settings;Z(n,e).forEach((function(n){U(n,e,t)}))}},tn.load=function(n,t){var e=c(t);U(n,e)},tn.resetStatus=function(n){f(n)},t&&function(n,t){if(t)if(t.length)for(var e,i=0;e=t[i];i+=1)l(n,e);else l(n,t)}(tn,window.lazyLoadOptions),tn}));
